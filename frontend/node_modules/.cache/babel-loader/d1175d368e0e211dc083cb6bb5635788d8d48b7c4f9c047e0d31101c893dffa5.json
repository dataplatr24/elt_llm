{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import TableBrowser from\"./TableBrowser\";import Login from\"./Login\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[isLoading,setIsLoading]=useState(true);const[user,setUser]=useState(null);useEffect(()=>{checkAuthentication();},[]);const checkAuthentication=async()=>{try{const response=await fetch(\"/api/me\",{credentials:\"include\"// Important: include cookies\n});if(response.ok){const data=await response.json();setUser(data.user);setIsAuthenticated(true);}else{setIsAuthenticated(false);}}catch(error){console.error(\"Auth check failed:\",error);setIsAuthenticated(false);}finally{setIsLoading(false);}};if(isLoading){return/*#__PURE__*/_jsxs(\"div\",{style:styles.loadingContainer,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.spinner}),/*#__PURE__*/_jsx(\"p\",{style:styles.loadingText,children:\"Loading...\"})]});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Login,{});}return/*#__PURE__*/_jsx(TableBrowser,{user:user});}const styles={loadingContainer:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100vh',backgroundColor:'#f3f4f6'},spinner:{width:'48px',height:'48px',border:'4px solid #e5e7eb',borderTop:'4px solid #3b82f6',borderRadius:'50%',animation:'spin 1s linear infinite'},loadingText:{marginTop:'16px',fontSize:'16px',color:'#6b7280'}};// Add spinner animation\nconst styleSheet=document.styleSheets[0];const keyframes=\"\\n  @keyframes spin {\\n    0% { transform: rotate(0deg); }\\n    100% { transform: rotate(360deg); }\\n  }\\n\";try{styleSheet.insertRule(keyframes,styleSheet.cssRules.length);}catch(e){}export default App;","map":{"version":3,"names":["React","useEffect","useState","TableBrowser","Login","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","isLoading","setIsLoading","user","setUser","checkAuthentication","response","fetch","credentials","ok","data","json","error","console","style","styles","loadingContainer","children","spinner","loadingText","display","flexDirection","alignItems","justifyContent","height","backgroundColor","width","border","borderTop","borderRadius","animation","marginTop","fontSize","color","styleSheet","document","styleSheets","keyframes","insertRule","cssRules","length","e"],"sources":["C:/Users/Akhilesh/Downloads/lakehouse-app/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport TableBrowser from \"./TableBrowser\";\nimport Login from \"./Login\";\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    checkAuthentication();\n  }, []);\n\n  const checkAuthentication = async () => {\n    try {\n      const response = await fetch(\"/api/me\", {\n        credentials: \"include\" // Important: include cookies\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setUser(data.user);\n        setIsAuthenticated(true);\n      } else {\n        setIsAuthenticated(false);\n      }\n    } catch (error) {\n      console.error(\"Auth check failed:\", error);\n      setIsAuthenticated(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div style={styles.loadingContainer}>\n        <div style={styles.spinner}></div>\n        <p style={styles.loadingText}>Loading...</p>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Login />;\n  }\n\n  return <TableBrowser user={user} />;\n}\n\nconst styles = {\n  loadingContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100vh',\n    backgroundColor: '#f3f4f6',\n  },\n  spinner: {\n    width: '48px',\n    height: '48px',\n    border: '4px solid #e5e7eb',\n    borderTop: '4px solid #3b82f6',\n    borderRadius: '50%',\n    animation: 'spin 1s linear infinite',\n  },\n  loadingText: {\n    marginTop: '16px',\n    fontSize: '16px',\n    color: '#6b7280',\n  },\n};\n\n// Add spinner animation\nconst styleSheet = document.styleSheets[0];\nconst keyframes = `\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n`;\ntry {\n  styleSheet.insertRule(keyframes, styleSheet.cssRules.length);\n} catch (e) {}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}